<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora de Compensação – SENAI - CETIQT</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      display: flex;
      justify-content: center;
      padding: 40px;
    }

    .card {
      background: #fff;
      padding: 25px;
      width: 420px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      color: #005ca9;
      margin-bottom: 20px;
      font-weight: bold;
    }

    label {
      font-weight: bold;
      margin-top: 15px;
      display: block;
    }

    input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      font-size: 14px;
    }

    button {
      margin-top: 20px;
      width: 100%;
      padding: 10px;
      font-size: 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .calcular {
      background: #005ca9;
      color: #fff;
    }

    .limpar {
      background: #ccc;
      margin-top: 10px;
    }

    .resultado {
      margin-top: 20px;
      background: #eef3f8;
      padding: 15px;
      border-radius: 6px;
    }
  </style>
</head>
<body>

  <div class="card">
    <h1>SENAI - CETIQT</h1>

    <label>Total de horas a compensar</label>
    <input type="number" id="horasTotal" placeholder="Ex: 120">

    <label>Minutos a compensar</label>
    <input type="number" id="minutosTotal" placeholder="Ex: 0">

    <label>Data de referência</label>
    <input type="date" id="dataRef">

    <button class="calcular" onclick="calcular()">Calcular</button>
    <button class="limpar" onclick="limpar()">Limpar dados</button>

    <div class="resultado" id="resultado"></div>
  </div>

  <script>
    const feriados = [
      "2026-01-01","2026-01-02","2026-01-19","2026-01-20",
      "2026-02-13","2026-02-16","2026-02-17","2026-02-18",
      "2026-04-03","2026-04-20","2026-04-21","2026-04-23",
      "2026-05-01",
      "2026-06-04","2026-06-05",
      "2026-09-07",
      "2026-10-12",
      "2026-11-02","2026-11-20",
      "2026-12-21","2026-12-22","2026-12-23","2026-12-24",
      "2026-12-25","2026-12-28","2026-12-29","2026-12-30","2026-12-31"
    ];

    const TOTAL_DIAS_UTEIS = 233;

    function isDiaUtil(data) {
      const dia = data.getDay();
      const iso = data.toISOString().slice(0,10);
      return dia !== 0 && dia !== 6 && !feriados.includes(iso);
    }

    function diasUteisAte(dataLimite) {
      let data = new Date("2026-01-01");
      let count = 0;

      while (data < dataLimite) {
        if (isDiaUtil(data)) count++;
        data.setDate(data.getDate() + 1);
      }
      return count;
    }

    function calcular() {
      const h = parseInt(document.getElementById("horasTotal").value) || 0;
      const m = parseInt(document.getElementById("minutosTotal").value) || 0;
      const dataRef = new Date(document.getElementById("dataRef").value);

      if (!dataRef) return;

      const minutosTotais = h * 60 + m;
      const diasPassados = diasUteisAte(dataRef);
      const diasRestantes = TOTAL_DIAS_UTEIS - diasPassados;

      const mediaMin = minutosTotais / diasRestantes;
      const mediaH = Math.floor(mediaMin / 60);
      const mediaM = Math.round(mediaMin % 60);

      document.getElementById("resultado").innerHTML = `
        <strong>Dias úteis restantes:</strong> ${diasRestantes}<br><br>
        <strong>Média diária necessária:</strong><br>
        ${mediaH}h ${mediaM}min por dia
      `;
    }

    function limpar() {
      document.getElementById("horasTotal").value = "";
      document.getElementById("minutosTotal").value = "";
      document.getElementById("dataRef").value = "";
      document.getElementById("resultado").innerHTML = "";
    }
  </script>

</body>
</html>
